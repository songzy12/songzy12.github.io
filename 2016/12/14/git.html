<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Git | Secret Base</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Git" />
<meta name="author" content="Zhengyang Song" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Basic usage of git." />
<meta property="og:description" content="Basic usage of git." />
<link rel="canonical" href="http://songzy12.github.io/2016/12/14/git.html" />
<meta property="og:url" content="http://songzy12.github.io/2016/12/14/git.html" />
<meta property="og:site_name" content="Secret Base" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-12-14T01:47:26+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Git" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhengyang Song"},"dateModified":"2016-12-14T01:47:26+08:00","datePublished":"2016-12-14T01:47:26+08:00","description":"Basic usage of git.","headline":"Git","mainEntityOfPage":{"@type":"WebPage","@id":"http://songzy12.github.io/2016/12/14/git.html"},"url":"http://songzy12.github.io/2016/12/14/git.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://songzy12.github.io/feed.xml" title="Secret Base" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Secret Base</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Git</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2016-12-14T01:47:26+08:00" itemprop="datePublished">Dec 14, 2016
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Basic usage of git.</p>

<h2>Squashing Git Commits</h2>

<p><a href="https://gist.github.com/patik/b8a9dc5cd356f9f6f980">https://gist.github.com/patik/b8a9dc5cd356f9f6f980</a></p>

<pre><code>git reset --soft HEAD~3
git commit -m "Squashing Git Commits"
</code></pre>



<pre><code>git push origin +master
</code></pre>



<pre><code>git log --author=songzy
git reset f7f4aec68
git log -2
git reset 7e26106
git log -2
git clean -df
git checkout -- .
</code></pre>

<h2>git reset</h2>

<pre><code>git reset &lt;file&gt;
</code></pre>

<p>Remove the specified file from the staging area, but leave the working directory unchanged.</p>

<pre><code>git reset
</code></pre>

<p>Reset the staging area to match the most recent commit, but leave the working directory unchanged.</p>

<pre><code>git reset --hard
</code></pre>

<p>Reset the staging area and the working directory to match the most recent commit.</p>

<pre><code>git reset &lt;commit&gt;
</code></pre>

<p>Move the current branch tip backward to <commit>, reset the staging area to match, but leave the working directory alone.</p>

<pre><code>git reset --hard &lt;commit&gt;
</code></pre>

<p>Move the current branch tip backward to <commit> and reset both the staging area and the working directory to match.</p>

<p>Whereas reverting is designed to safely undo a public commit, git reset is designed to undo local changes.</p>

<pre><code>git add foo.py
git commit -m "Start developing a crazy feature"
git commit -a -m "Continue my crazy feature"
git reset --hard HEAD~2
</code></pre>

<p>The <code>git reset HEAD~2</code> command moves the current branch backward by two commits.</p>

<h2>git rebase</h2>

<pre><code># Add the remote, call it "upstream":

git remote add upstream https://github.com/whoever/whatever.git

# Fetch all the branches of that remote into remote-tracking branches,
# such as upstream/master:

git fetch upstream

# Make sure that you're on your master branch:

git checkout master

# Rewrite your master branch so that any commits of yours that
# aren't already in upstream/master are replayed on top of that
# other branch:

git rebase upstream/master

git push -f origin master
</code></pre>

<h2>git branch</h2>

<pre><code>git show-branch -a
</code></pre>

<p>Show branches and their commits</p>

<pre><code>git branch &lt;branch&gt;
</code></pre>

<p>Create a new branch called <branch>. This does not check out the new branch.</p>

<pre><code>git branch -d &lt;branch&gt;
</code></pre>

<p>Delete the specified branch.</p>

<pre><code>git branch -D &lt;branch&gt;
</code></pre>

<p>Force delete the specified branch, even if it has unmerged changes.</p>

<pre><code>git branch -m &lt;branch&gt;
</code></pre>

<p>Rename the current branch to <code>&lt;branch&gt;</code>.</p>

<pre><code>git checkout $branch2
git merge $branch1
</code></pre>

<p>Merge branch1 into branch2.</p>

<pre><code>warning: refname 'HEAD' is ambiguous.
</code></pre>



<pre><code>git branch -m HEAD temp
git branch -d temp
</code></pre>

<h2>git checkout</h2>

<p>Give up the current modification and go back to the last commit</p>

<pre><code>git checkout -- .
</code></pre>



<pre><code>git log --oneline

b7119f2 Continue doing crazy things
872fa7e Try something crazy
a1e8fb5 Make some important changes to hello.py
435b61d Create hello.py
9773e52 Initial import
</code></pre>

<p>You can find the ID of the revision you want to see.</p>

<pre><code>git checkout a1e8fb5
git checkout master
</code></pre>

<p>Nothing you do in here will be saved in your repository.</p>

<pre><code>git checkout a1e8fb5 hello.py
git checkout HEAD hello.py
</code></pre>

<p>Unlike checking out a commit, this does affect the current state of your project.</p>

<hr />

<pre><code>git status
HEAD detached From 91ea20b
</code></pre>



<pre><code>git checkout source
error: Your local changes to the following files would be overwritten by checkout:
        source/_posts/2016-02-25-github.markdown
Please, commit your changes or stash them before you can switch branches.
Aborting
</code></pre>



<pre><code>git stash
git checkout source
</code></pre>

<h2>git clean</h2>

<pre><code>git clean -n
</code></pre>

<p>This will show you which files are going to be removed without actually doing it.</p>

<pre><code>git clean -f
</code></pre>

<p>Remove untracked files from the current directory.</p>

<pre><code>git clean -f &lt;path&gt;
</code></pre>

<p>Remove untracked files, but limit the operation to the specified path.</p>

<pre><code>git clean -df
</code></pre>

<p>Remove untracked files and untracked directories from the current directory.</p>

<pre><code>git clean -xf
</code></pre>

<p>Remove untracked files from the current directory as well as any files that Git usually ignores.</p>

<h2>git clone</h2>

<p>If you clone a repository, the default branch you have is whatever the remote&rsquo;s <code>HEAD</code> points to (<code>HEAD</code> is actually a symbolic ref that points to a branch name).</p>

<p>A symbolic ref is a regular file that stores a string that begins with <code>ref: refs/</code>. For example, your <code>.git/HEAD</code> is a regular file whose contents is <code>ref: refs/heads/master</code>.</p>

<p><code>HEAD@{1}</code> is always last value of <code>HEAD</code>, <code>ORIG_HEAD</code> is last value of <code>HEAD</code> before dangerous operation.</p>

<h2>git commit</h2>

<pre><code>git commit --amend 
</code></pre>

<p>Combine the staged changes with the previous commit and replace the previous commit with the resulting snapshot.</p>

<pre><code>git commit -a
</code></pre>

<p>Commit all your local changes. (like <code>git add .</code> followed by <code>git commit</code>)</p>

<h2>git config</h2>

<pre><code>vi ~/.gitconfig
</code></pre>



<pre><code>git config --global user.email "your_email@example.com"
git config --global user.email
</code></pre>

<h2>git diff</h2>

<pre><code>git diff filename
</code></pre>

<h2>git fetch</h2>

<pre><code>git fetch
</code></pre>

<p>Fetch all of the branches from the repository. This also downloads all of the required commits and files from the other repository.</p>

<pre><code>git checkout master
git log origin/master
git merge origin/master
</code></pre>

<hr />

<pre><code>error: RPC failed; result=18, HTTP code = 0
</code></pre>



<pre><code>git fetch origin master
git merge origin/master
</code></pre>

<h2>git format-patch</h2>

<pre><code>$ git format-patch -o ./patches -2
0001-C.patch
0002-D.patch
</code></pre>



<pre><code>git am ./patches/*
</code></pre>

<h2>git log</h2>

<p>Check all the change paths to file <code>Predictor.java</code>.</p>

<pre><code>git log --follow -p Predictor.java
git log -p -1
</code></pre>

<h2>git merge</h2>

<pre><code>git merge --squash &lt;branch_name&gt;
</code></pre>

<p>將另一個 branch 的 commit 合併為一筆，特別適合需要做實驗的 fixes bug 或 new feature，最後只留結果。合併完不會幫你先 commit。</p>

<h2>git pull</h2>

<pre><code>git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;
</code></pre>

<p>如果远程分支是与当前分支合并，则冒号后面的部分可以省略。</p>

<p><a href="https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting/">Here</a>.</p>

<hr />

<pre><code>ssh: connect to host github.com port 22: Connection refused
</code></pre>



<pre><code>vi ~/.ssh/config

Host github.com
  Hostname ssh.github.com
  Port 443
</code></pre>

<h2>git push</h2>

<pre><code>git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;
</code></pre>



<pre><code>git push origin HEAD:master
</code></pre>

<p>See the commits tab(rather than project tab). It is all there.</p>

<pre><code>ssh -v -T songzy12@git.tsinghuax.org
</code></pre>

<p>IP filtered, move to your lab.</p>

<pre><code>fatal: Could not read from remote repository.
</code></pre>

<p>Server down.</p>

<h2>git remote</h2>

<pre><code>git remote set-url origin git@github.com:songzy12/certificate_predictor.git
</code></pre>

<h2>git revert</h2>

<pre><code>git revert &lt;commit&gt;
</code></pre>

<p>Generate a new commit that undoes all of the changes introduced in <code>&lt;commit&gt;</code>, then apply it to the current branch.</p>

<ul>
<li>it doesn’t change the project history</li>
<li>it is able to target an individual commit at an arbitrary point in the history</li>
</ul>


<pre><code>git commit -m "Make some changes that will be undone"
git revert HEAD
</code></pre>

<h2>git rm</h2>

<pre><code>git rm -r --cached ".\source\_posts\Git Shell.lnk"
</code></pre>

<p>The git rm command will allows you to remote a file from git control. The –cached option to git remove allows you to leave it on your hard drive.</p>

<h2>git stash</h2>

<pre><code>git stash
git stash list
git stash pop
git stash clear
git stash drop
</code></pre>

<h2>fileMode</h2>

<ul>
<li>100644: normal file</li>
<li>100755: executable file</li>
<li>120000: symbolic link</li>
</ul>


<p>The mode is taken from normal UNIX modes but is much less flexible – these three modes are the only ones that are valid for files (blobs) in Git (although other modes are used for directories and submodules).</p>

<p>The 6 digits show the file mode using the classical UNIX notations. First two digits show file type, the third one is about set-uid/set-gid/sticky bits, and you know the last three. 4\2\1 is just r\w\x.</p>

<pre><code>man 2 stat
</code></pre>



<pre><code>       S_IFLNK    0120000   symbolic link
       S_IFREG    0100000   regular file

       S_IRWXU    00700     mask for file owner permissions
       S_IRUSR    00400     owner has read permission
       S_IWUSR    00200     owner has write permission
       S_IXUSR    00100     owner has execute permission
       S_IRWXG    00070     mask for group permissions
       S_IRGRP    00040     group has read permission
       S_IWGRP    00020     group has write permission
       S_IXGRP    00010     group has execute permission
       S_IRWXO    00007     mask for permissions for others (not in group)
       S_IROTH    00004     others have read permission           
       S_IWOTH    00002     others have write permission
       S_IXOTH    00001     others have execute permission
</code></pre>

<p>To ignore file mode changes:</p>

<pre><code>repo forall -c git config core.fileMode false
</code></pre>

  </div><a class="u-url" href="/2016/12/14/git.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Secret Base</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Zhengyang Song</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/songzy12"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">songzy12</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>All those little bugs I have ever met.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
